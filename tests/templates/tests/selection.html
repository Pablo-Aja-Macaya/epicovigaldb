{% extends 'base.html' %}

{% block content %}
<div class="container">
  {% if message %}
    <div class="alert alert-success" role="alert">
      {{ message }}  Check their status at the <a href="#" data-toggle="modal" data-target="#exampleModal">Jobs' status page</a>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  {% endif %}
  {% if warning %}
    <div class="alert alert-warning" role="alert">
      {{ warning }}
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  {% endif %}



  <div class="container pb-2 pt-2">
    <div class="card mb-3" style="max-width: 100%;" >
      <div class="row no-gutters pt-3 pb-3">
        <div class="col-md-2 d-flex my-auto justify-content-center" >
          <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
          </svg>
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h4 class="card-title"><strong>Update database</strong></h4>
            <p class="card-text">This will update the database if there are any new file results in certain folders.</p>
          </div>
        </div>
        <div class="col-md-2 text-center my-auto">
            <div class="btn-group">
                <button type="button" class="btn btn-primary  border border-dark " onclick="">Update</button>
            </div>
        </div>
      </div>
    </div>
  </div>  
  <hr></hr>
  <h2>Run tests</h2>
  <br>

  <!-- <form id="select_tests" method="POST" action="{% url 'send_selection' %}">
    {% csrf_token %}
    <fieldset class="form-group">
      <div class="row">
        <legend class="col-form-label col-sm-2 pt-0">Select tests</legend>
        <div class="col-sm-10">
          {% with 'All Picard SingleCheck NGSStats NextClade iVar Lineages' as list %}
            {% for i in list.split %}
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="inlineCheckbox{{i}}" name="{{i}}" value="{{i}}">
                <label class="form-check-label" for="inlineCheckbox{{i}}">{{i}}</label>
              </div>
            {% endfor %}
          {% endwith %}
        </div>
      </div>
    </fieldset>
    <hr></hr>
    <fieldset class="form-group">
      <div class="row">
        <legend class="col-form-label col-sm-2 pt-0">Select samples</legend>
        <div class="col-sm-10">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="origin" id="gridRadios1" value="csv" checked>
            <label class="form-check-label" for="gridRadios1">
              Select samples via CSV
            </label>
          </div>
          <div class="form-check disabled">
            <input class="form-check-input" type="radio" name="origin" id="gridRadios2" value="manual" disabled>
            <label class="form-check-label" for="gridRadios2">
              Select samples manually
            </label>
          </div>
          <div class="form-check disabled">
            <input class="form-check-input" type="radio" name="origin" id="gridRadios3" value="untested" disabled>
            <label class="form-check-label" for="gridRadios3">
              Run on untested files
            </label>
          </div>
        </div>
      </div>
    </fieldset>
      <div class="form-group row justify-content-center">
          <a href="javascript:{document.getElementById('select_tests').submit()}"><button type="submit" class="btn btn-primary" data-toggle="collapse" data-target="#collapseLoading" aria-expanded="false" aria-controls="collapseExample"">Run tests</button></a>
      </div>
  </form> -->


  <form id="select_tests" method="POST" action="{% url 'send_selection' %}">
    {% csrf_token %}
    <fieldset class="form-group">
      <div class="row">
        <legend class="col-form-label col-sm-2 pt-0">Select tests</legend>

        <div class="custom-control custom-radio pr-3">
          <input type="radio" id="customRadio1" name="customRadio" class="custom-control-input" >
          <label class="custom-control-label" for="customRadio1">Run all tests</label>
        </div>
        <div class="custom-control custom-radio">
          <input type="radio" id="customRadio2" name="customRadio" class="custom-control-input" data-toggle="collapse" data-target="#collapseTests" aria-expanded="false" aria-controls="collapseTests">
          <label class="custom-control-label" for="customRadio2">Select tests to run</label>
        </div>


        <div class="col-sm-4 pl-3" >
          <div class="collapse" id="collapseTests">
          {% with 'Picard SingleCheck NGSStats NextClade iVar Lineages' as list %}
            {% for i in list.split %}
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="inlineCheckbox{{i}}" name="{{i}}" value="{{i}}">
                <label class="form-check-label" for="inlineCheckbox{{i}}">{{i}}</label>
              </div>
            {% endfor %}
          {% endwith %}
          </div>
        </div>

      </div>
    </fieldset>
    <hr></hr>
    <fieldset class="form-group">
      <div class="row">
        <legend class="col-form-label col-sm-2 pt-0">Select samples</legend>
        <div class="col-sm-10">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="origin" id="gridRadios1" value="csv" data-toggle="collapse" data-target="#csvOrigin" aria-expanded="false" aria-controls="csvOrigin">
            <label class="form-check-label" for="gridRadios1">
              Select samples via CSV
            </label>
          </div>
          <div class="row collapse pt-3" id="csvOrigin">
            <div class="form-group row">
              <div class="col-sm-4">Select file</div>
              <div class="col-lg-12">
                <div class="custom-file ">
                  <input type="file" class="custom-file-input" name="document" id="inputGroupFile02" ">
                  <label class="custom-file-label" for="inputGroupFile04">Choose file</label>
                  <small id="inputHelpBlock" class="form-text text-muted">
                    The csv must have the same structure as the <a href="#" data-toggle="modal" data-target="#exampleModal"><strong>example</strong></a>.
                  </small>
                </div>
              </div>
            </div>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="origin" id="gridRadios2" value="manualOrigin" data-toggle="collapse" data-target="#manualOrigin" aria-expanded="false" aria-controls="manualOrigin">
            <label class="form-check-label" for="gridRadios2">
              Select samples manually
            </label>
          </div>
          <div class="row collapse pt-3" id="manualOrigin">
            <div class="form-group">
              <label for="exampleFormControlSelect1">Example select</label>
              <select class="form-control" id="exampleFormControlSelect1">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="origin" id="gridRadios3" value="untested">
            <label class="form-check-label" for="gridRadios3">
              Run on untested files
            </label>
          </div>
        </div>
      </div>
    </fieldset>
      <div class="form-group row justify-content-center">
          <a href="javascript:{document.getElementById('select_tests').submit()}"><button type="submit" class="btn btn-primary" data-toggle="collapse" data-target="#collapseLoading" aria-expanded="false" aria-controls="collapseExample"">Run tests</button></a>
      </div>
  </form>


  <!-- MenÃº de carga colapsable -->
  <div class="collapse" id="collapseLoading">
    <div class="card card-body border-0">  
      <div class="d-flex justify-content-center text-center">
        <div class="spinner-border text-primary" style="width: 5rem; height: 5rem;" role="status">
          <span class="sr-only">Loading...</span>   
        </div>   
      </div>
      <div class="d-flex justify-content-center text-center pt-3">   
      <strong>Loading</strong>
      </div>  
    </div>
  </div>
</div>





{% endblock %}