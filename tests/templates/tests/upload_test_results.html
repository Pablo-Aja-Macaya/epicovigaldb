{% extends 'base.html' %}

{% block content %}
<div class="container">
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link" href="selection">Run tests</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" href="#">Upload results</a>
    </li>
  </ul>
  <p></p>

  {% if message %}
    <div class="alert alert-success" role="alert">
      {{ message }}  Check their status at the <a href="#" data-toggle="modal" data-target="#exampleModal">Jobs' status page</a>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  {% endif %}
  {% if warning %}
    <div class="alert alert-warning" role="alert">
      {{ warning }}
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  {% endif %}



  <div class="container pb-2 pt-2">
    <div class="card mb-3" style="max-width: 100%;" >
      <div class="row no-gutters pt-3 pb-3">
        <div class="col-md-2 d-flex my-auto justify-content-center" >
          <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
          </svg>
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h4 class="card-title"><strong>Update database</strong></h4>
            <p class="card-text">This will update the database if there are any new file results in certain folders.</p>
          </div>
        </div>
        <div class="col-md-2 text-center my-auto">
            <div class="btn-group">
                <button type="button" class="btn btn-primary  border border-dark " onclick="">Update</button>
            </div>
        </div>
      </div>
    </div>
  </div>  
  <hr></hr>
  <div class="container">
    <h2>Upload test results</h2>
    <br>
    
    <p class='pb-3'>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent rhoncus ex vel nisl venenatis, non malesuada augue porttitor. Praesent pellentesque nec lectus sit amet tincidunt. Morbi finibus lobortis vulputate. Sed scelerisque, nisi vel mollis ultrices, ante libero iaculis massa, a bibendum lacus enim eget sapien. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nulla eget tellus sagittis, maximus lectus at, eleifend turpis. Cras volutpat lorem in augue ullamcorper, vitae condimentum tortor pulvinar. Donec eget magna odio. Donec non magna nec velit aliquet pretium ac a dolor. Aliquam hendrerit aliquet mauris a dignissim. </p>
  

    <form id="send_results" method="POST" enctype="multipart/form-data" action="{% url 'send_results' %}">
      {% csrf_token %}
      <div class="form-group row-10">
        <div class="input-group mb-3">
          <div class="custom-file">
            <input type="file" class="custom-file-input" name="documents" id="inputGroupFile02" multiple>
            <label class="custom-file-label" for="inputGroupFile02" >Choose file</label>
            <small id="inputHelpBlock" class="form-text text-muted">
              The csv must have the same structure as the <a href="#" data-toggle="modal" data-target="#exampleModal"><strong>example</strong></a>.
            </small>
          </div>
      </div>     
      </div>  
        <div class="form-group row justify-content-center">
            <a href="javascript:{document.getElementById('send_results').submit()}"><button type="submit" class="btn btn-primary" data-toggle="collapse" data-target="#collapseLoading" aria-expanded="false" aria-controls="collapseExample">Upload</button></a>
        </div>
    </form>


    <!-- MenÃº de carga colapsable -->
    <div class="collapse" id="collapseLoading">
      <div class="card card-body border-0">  
        <div class="d-flex justify-content-center text-center">
          <div class="spinner-border text-primary" style="width: 5rem; height: 5rem;" role="status">
            <span class="sr-only">Loading...</span>   
          </div>   
        </div>
        <div class="d-flex justify-content-center text-center pt-3">   
        <strong>Loading</strong>
        </div>  
      </div>
    </div>
  </div>
</div>
<script>
  document.querySelector('.custom-file-input').addEventListener('change',function(e){
    var fileName = document.getElementById("inputGroupFile02").files[0].name;
    var nextSibling = e.target.nextElementSibling
    nextSibling.innerText = fileName
  })
</script>



{% endblock %}