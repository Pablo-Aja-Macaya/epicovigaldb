{% extends 'base.html' %}

{% block content %}
<div class="container-lg pb-4">
    <div class="btn-group">
        <a href="{% url 'general' %}"><button type="button"  class="btn btn-outline-primary" >&lt Volver a tablas</button></a>
    </div>
    <h2 class='pb-3 pt-3'><strong>Gr√°ficas</strong></h2>
    <form action={{url_form}} method="POST">
      {% csrf_token %}
      <div class="table-responsive">
        <table class='table table-hover table-striped ' >
        {{ form.as_table }} 
        </table>          
      </div>
      <div class="row justify-content-center">
        <button type="submit" value="Submit" class="btn btn-primary" >Actualizar</button>
      </div>
    </form>  
    <hr>
</div>



<div class='container-fluid'>
    <div class="row justify-content-center">
        <div class="col" >
            <!-- <button class="btn btn-outline-info" > 
                <h4 style="margin-bottom: 0%;"><i class="bi bi-link" ></i></h4>
            </button> -->
            <div id="hospital_graph" data-url={{url_origen}}></div>
        </div>
        <div class="col">
            <div id="linajes_hospitales_graph" data-url={{url_linajes_hospital}}></div>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col">
            <div id="linajes_porcentaje_total" data-url={{url_linajes}} ></div>
        </div>
        <div class="col">
            <div id="concellos_gal_graph" data-url={{url_concellos}} style="height: 700px;"></div>
        </div>
    </div>
</div> 




  <script>
    $.ajax({
      url: $("#linajes_porcentaje_total").attr("data-url"),
      dataType: 'json',
      success: function (data) {
        Highcharts.chart("linajes_porcentaje_total", data);
      }
    });
  </script>
  <script>
    $.ajax({
      url: $("#linajes_hospitales_graph").attr("data-url"),
      dataType: 'json',
      success: function (data) {
        Highcharts.chart("linajes_hospitales_graph", data);
      }
    });
  </script>
  <script>
    $.ajax({
      url: $("#concellos_gal_graph").attr("data-url"),
      dataType: 'json',
      success: function (data) {
        Highcharts.mapChart("concellos_gal_graph", data);
      }
    });
  </script>
  <script>
    $.ajax({
      url: $("#hospital_graph").attr("data-url"),
      dataType: 'json',
      success: function (data) {
        Highcharts.chart("hospital_graph", data);
      }
    });
  </script>
  <script>
    $.ajax({
      url: $("#variants_line_graph").attr("data-url"),
      dataType: 'json',
      success: function (data) {
        Highcharts.chart("variants_line_graph", data);
      }
    });
    $.ajax({
      url: $("#variants_line_graph2").attr("data-url"),
      dataType: 'json',
      success: function (data) {
        Highcharts.chart("variants_line_graph2", data);
      }
    });
  </script>
  <script>
    $.ajax({
      url: $("#variants_column_graph").attr("data-url"),
      dataType: 'json',
      success: function (data) {
        Highcharts.chart("variants_column_graph", data);
      }
    });
  </script>

{% endblock %}